<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title>Cajero Automático - Consulta de Saldo</title>
    <h:outputStylesheet library="css" name="style.css"/>
</h:head>
<h:body>
    <div class="container">
        <h1>Consulta de Saldo</h1>
        
        <div class="balance-display">
            <h2>Su saldo actual es:</h2>
            <div class="balance-amount">
                <h:outputText value="#{cajeroBean.cuentaActual.saldo}">
                    <f:convertNumber type="currency" currencySymbol="$"/>
                </h:outputText>
            </div>
        </div>
        
        <div class="transaction-history">
            <h2>Últimas Transacciones</h2>
            <h:dataTable value="#{cajeroBean.obtenerUltimasTransacciones()}" var="transaccion"
                       styleClass="transactions-table" rowClasses="odd-row,even-row"
                       headerClass="table-header" rendered="#{not empty cajeroBean.obtenerUltimasTransacciones()}">
                <h:column>
                    <f:facet name="header">Fecha</f:facet>
                    <h:outputText value="#{transaccion.fechaFormateada}"/>
                </h:column>
                
                <h:column>
                    <f:facet name="header">Tipo</f:facet>
                    <h:outputText value="#{transaccion.tipo.descripcion}"/>
                </h:column>
                
                <h:column>
                    <f:facet name="header">Monto</f:facet>
                    <h:outputText value="#{transaccion.monto}">
                        <f:convertNumber type="currency" currencySymbol="$"/>
                    </h:outputText>
                </h:column>
                
                <h:column>
                    <f:facet name="header">Saldo Resultante</f:facet>
                    <h:outputText value="#{transaccion.saldoResultante}">
                        <f:convertNumber type="currency" currencySymbol="$"/>
                    </h:outputText>
                </h:column>
            </h:dataTable>
            
            <h:panelGroup rendered="#{empty cajeroBean.obtenerUltimasTransacciones()}">
                <p class="no-transactions">No hay transacciones disponibles.</p>
            </h:panelGroup>
        </div>
        
        <div class="action-buttons">
            <h:form>
                <h:button value="Ver Historial Completo" outcome="historial" styleClass="button history-button"/>
            </h:form>
        </div>
        
        <div class="action-buttons">
            <h:form>
                <h:button value="Volver al Menú" outcome="menu" styleClass="button secondary"/>
                <h:commandButton value="Cerrar Sesión" action="#{cajeroBean.cerrarSesion}" 
                               styleClass="button danger"/>
            </h:form>
        </div>
    </div>
</h:body>
</html>